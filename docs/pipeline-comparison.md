# 新旧パイプライン記事比較レポート

生成日: 2026-02-13

## 比較対象

| | 新パイプライン (Pipeline v2) | 旧パイプライン |
|---|---|---|
| 対象記事 | `2026-02-13-2-eu-aiai.md`<br>`2026-02-13-1-dxai.md` | `2026-02-12-1-llama-4.md`<br>`2026-02-12-3-samsunggalaxy-ai.md`<br>`2025-11-23-3-foxconnnvidia.md` |
| 生成スクリプト | `scripts/article_pipeline.py` (6ステージ) | `improved-ai-pipeline.yml` (bash 749行) |
| 生成数 | 2記事 (Gemini API枠消化のため1/3のみ生成) | ~2,000記事 |

---

## 1. フロントマター(メタデータ)の比較

### 新パイプライン
```yaml
title: "製造業DXの次なる一手：AIエージェントが拓く、現場の予知保全と品質管理の新境地"
categories: [業界別AI活用]
tags: ["AI", "業界別AI活用"]
author: "ALLFORCES産業リサーチチーム"    # カテゴリ別ペルソナ
reading_time: 13                          # 動的計算(文字数ベース)
image: "/assets/images/posts/...-ogp.png" # OGP画像あり
```

### 旧パイプライン
```yaml
title: "Llama 4の可能性とは？"             # 短い・見切れ多数
categories: ["AI技術ガイド"]
tags: ["AI", "最新ニュース", "技術動向", "Meta", "Google", "投資", "チップ"]  # デフォルト3タグ+grep追加
author: "ALLFORCES編集部"                 # 全記事同一
reading_time: 8                           # ハードコード(8 or 20のみ)
# image: なし                             # OGP画像なし
```

### 差分サマリー

| 項目 | 新 | 旧 | 改善度 |
|------|---|---|--------|
| タイトル品質 | 具体的・40-60字 | 短い・見切れ・`**`混入 | 大幅改善 |
| カテゴリ | AI判定(enum制約) | bash grepで判定(偏重) | 改善 |
| タグ | AIが記事内容から生成 | デフォルト3タグ+grep | やや改善(まだ2タグと少ない) |
| 著者名 | カテゴリ別6種 | 全記事「ALLFORCES編集部」 | 改善 |
| 読了時間 | 文字数ベース動的計算 | 8 or 20固定 | 改善 |
| OGP画像 | 自動生成あり | なし | 新機能 |
| excerpt | AI生成(まだ`##`混入あり) | 「について詳細に分析します」定型 | 改善(課題残り) |

---

## 2. コンテンツ品質の比較

### 2-1. ナレッジベースデータの活用

**新パイプライン**: 具体的な市場データをプロンプトに注入
```
生成AI市場は2025年には$71Bに達し、AI市場全体では2030年には$827Bに成長
日本国内でも2025年には2.3兆円規模
OpenAIはGPT-4oのようなマルチモーダルLLMやo3を開発し、評価額は$830B
```

**旧パイプライン**: 数値なし or 根拠のない数値
```
（具体的な市場データの記載なし。以前のパイプラインではsedで「大幅な→300%の」等の捏造数値を挿入していた）
```

### 2-2. 記事構造

**新パイプライン (EU AI法記事)**:
```
- 比較表 (OpenAI vs Google, OpenAI vs Anthropic)  ← enrich_article.pyで自動挿入
- H2: メインタイトル(導入)
- H3: 1. 戦略的背景
- H3: 2. フレームワーク提示
- H3: 3. 具体的なアクションステップ
  - H4: ステップ1-4 (詳細な実践ガイド)
- H3: 4. リスクと対策
- H3: 5. 成功の条件
- 関連記事リンク
- コンサルCTA
- Amazon書籍リンク
```

**旧パイプライン (Llama 4記事)**:
```
- 本文冒頭にタイトル繰り返し ← 冗長
- 太字見出し (**この「3倍」が...**) ← H2/H3でなくMarkdown太字
- 投資家向けセクション (番号リスト)
- 技術者向けセクション (番号リスト)
- 関連記事リンク (URLに日本語混入・文字化け)
- コンサルCTA
- Amazon書籍リンク
```

### 2-3. 文体・ペルソナ

**新パイプライン**: カテゴリ別ペルソナ
- 業界別AI活用 → 「産業アナリスト」「皆さん、こんにちは」(丁寧語)
- AI導入戦略 → 「戦略コンサルタント」「あなたが今、感じている」(敬語)

**旧パイプライン**: 全記事同一ペルソナ
- 「やあ、元気にしてるか？」「僕が初めて」「君もそう感じたかい？」
- 全カテゴリ共通の「AI業界20年のベテラン」口調
- 「あなたも感じているかもしれませんが」が頻出

---

## 3. 共通の問題点(新旧両方)

### 3-1. enrich_article.pyの比較表が本文冒頭に挿入される
新パイプライン記事でも、比較表がH2見出しの前（本文冒頭）に配置されている。
読者は記事を開いた瞬間に比較表を見ることになり、文脈がない。

```markdown
### OpenAI vs Google AI 比較    ← 記事冒頭にいきなり表
| 項目 | OpenAI | Google |
...
## EU AI法完全施行へ：...       ← 本文はここから
```

### 3-2. 関連記事リンクに文字化けURL・旧タイトルが残る
```markdown
- [**SamsungのGalaxy AIはの可能性と�](/2026/02/12/3-samsunggalaxy-ai/)
- [NVIDIA Blackwell: AI時代の�](/2025/09/07/3-nvidia-blackwell-ai時代の/)
```

### 3-3. タグ数が少ない(新パイプライン)
新パイプラインの記事タグは2個（"AI", "業界別AI活用"）のみ。
旧パイプラインは7個（ただし3個はデフォルト）。
理想は3-6個の内容に即したタグ。

### 3-4. 「やあ」「ねえ」「僕」等のカジュアルすぎる口調(旧パイプライン)
全記事がフレンドリーすぎる一人称語りで、専門メディアとしての信頼感が低い。

### 3-5. 本文冒頭にH1タイトル繰り返し(旧パイプライン)
```markdown
**SamsungのGalaxy AIは、単なる機能追加か？...**  ← タイトルと同じ内容を太字で繰り返し

やあ、元気にしてるか？長年この...               ← 本文開始
```

---

## 4. 品質スコア比較(quality_scorer.py基準)

| 項目(各25点) | 新:EU AI法 | 新:製造業DX | 旧:Llama 4 | 旧:Samsung | 旧:Foxconn |
|---|---|---|---|---|---|
| 完成度(文字数/見出し/結論) | 23 | 24 | 20 | 18 | 22 |
| 事実密度(数値/企業名/出典) | 24 | 22 | 12 | 10 | 15 |
| 可読性(段落/AI臭なし) | 18 | 19 | 15 | 14 | 13 |
| エンゲージメント(問いかけ/導入) | 18 | 17 | 17 | 16 | 16 |
| **合計** | **83** | **82** | **64** | **58** | **66** |
| 判定 | PASS | PASS | PASS(ギリギリ) | FAIL | PASS(ギリギリ) |

---

## 5. 改善提案(優先度順)

### 即時対応
1. **タイトル見切れ修正**: 助詞で終わる切断タイトル(77件)を本文から再構築
2. **関連記事リンクの文字化け修正**: enrich_article.pyの内部リンク生成を修正
3. **比較表の挿入位置修正**: 本文冒頭→最初のH2セクション後に移動
4. **excerpt生成の改善**: `##`マークダウンが混入しないようサニタイズ追加

### 短期対応
5. **タグ生成強化**: 新パイプラインのStage 4で3-6個のタグを生成するようプロンプト調整
6. **本文冒頭の重複タイトル除去**: 旧記事の`**タイトル繰り返し**`行を一括削除
7. **AI口調の脱臭**: 「やあ」「僕」「君」を「です/ます」調に一括置換

### 中期対応
8. **reading_time再計算**: 旧記事2,000件の読了時間を文字数ベースで再設定
9. **旧記事タグの個別最適化**: 本文内容からAI再生成(Gemini API活用)
10. **全記事OGP画像生成**: 旧記事にもgenerate_ogp_image.pyを適用

---

## 6. パイプライン別の生成フロー比較

### 旧パイプライン (improved-ai-pipeline.yml)
```
Gemini API 1回 → 記事全文生成
  ↓
bash grep × 40パターン → カテゴリ/タグ判定
  ↓
sed 置換 → 「大幅な」→「300%の」等の数値捏造
  ↓
head -c 40 → タイトル切断(マルチバイト破壊)
  ↓
textlint → enrich_article.py → 公開
```

### 新パイプライン (article_pipeline.py)
```
Stage 1: トピック企画 (flash-lite, JSON) ← ナレッジベース参照
  ↓
Stage 2: 記事ドラフト (flash + Web検索, JSON) ← KB注入
  ↓
Stage 3: タイトル最適化 (flash-lite, 3案→選択→サニタイズ)
  ↓
Stage 4: メタデータ生成 (flash-lite, JSON) ← enum制約
  ↓
Stage 5: 品質ゲート (Python計算, 60点以上で合格)
  ↓
Stage 6: textlint → enrich → OGP画像 → 公開
```
